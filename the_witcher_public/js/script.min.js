"use strict";

function testWebP(e) {
  var t = new Image();
  t.onload = t.onerror = function () {
    e(2 == t.height);
  }, t.src = "data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA";
}

testWebP(function (e) {
  1 == e ? document.querySelector("body").classList.add("webp") : document.querySelector("body").classList.add("no-webp");
});
var burgerBtn = document.querySelector(".burger"),
    burgerCenterBtn = document.querySelector(".burger__center"),
    burgerStartBtn = document.querySelector(".burger__start"),
    burgerEndBtn = document.querySelector(".burger__end"),
    mainMenu = document.querySelector(".header"),
    logo = document.querySelector(".logo"),
    menu = document.querySelectorAll(".menu"),
    socialBtn = document.querySelectorAll(".soc");

function displayBurgerMenu() {
  burgerCenterBtn.style.display = "none", burgerStartBtn.style.transform = "rotate(45deg) translateX(10px)", burgerEndBtn.style.transform = "rotate(-45deg) translateX(10px)", logo.style.display = "block", menu[0].style.display = "block", socialBtn[0].style.display = "block", menu[1].style.display = "block", socialBtn[1].style.display = "block", menu[2].style.display = "block", socialBtn[2].style.display = "block", mainMenu.style.height = "320px", mainMenu.style.width = "250px", burgerBtn.removeEventListener("click", displayBurgerMenu), burgerBtn.addEventListener("click", hideBurgerMenu);
}

function hideBurgerMenu() {
  mainMenu.style.height = "70px", mainMenu.style.width = "90px", logo.style.display = "none", menu[0].style.display = "none", socialBtn[0].style.display = "none", menu[1].style.display = "none", socialBtn[1].style.display = "none", menu[2].style.display = "none", socialBtn[2].style.display = "none", burgerCenterBtn.style.display = "block", burgerStartBtn.style.transform = "none", burgerEndBtn.style.transform = "none", burgerBtn.removeEventListener("click", hideBurgerMenu), burgerBtn.addEventListener("click", displayBurgerMenu);
}

burgerBtn.addEventListener("click", displayBurgerMenu);

var multiItemSlider = function multiItemSlider(e, t) {
  var n = document.querySelector(e),
      o = n.querySelector(".slider__wrapper"),
      r = n.querySelectorAll(".slider__item"),
      i = n.querySelectorAll(".slider__control"),
      l = (n.querySelector(".slider__control_left"), n.querySelector(".slider__control_right"), parseFloat(getComputedStyle(o).width)),
      d = parseFloat(getComputedStyle(r[0]).width),
      s = 0,
      a = 0,
      c = d / l * 100,
      u = [];
  r.forEach(function (e, t) {
    u.push({
      item: e,
      position: t,
      transform: 0
    });
  });

  var y = {
    getItemMin: function getItemMin() {
      var e = 0;
      return u.forEach(function (t, n) {
        t.position < u[e].position && (e = n);
      }), e;
    },
    getItemMax: function getItemMax() {
      var e = 0;
      return u.forEach(function (t, n) {
        t.position > u[e].position && (e = n);
      }), e;
    },
    getMin: function getMin() {
      return u[y.getItemMin()].position;
    },
    getMax: function getMax() {
      return u[y.getItemMax()].position;
    }
  },
      m = function m(e) {
    var t;
    "right" === e && (++s + l / d - 1 > y.getMax() && (t = y.getItemMin(), u[t].position = y.getMax() + 1, u[t].transform += 100 * u.length, u[t].item.style.transform = "translateX(" + u[t].transform + "%)"), a -= c), "left" === e && (--s < y.getMin() && (t = y.getItemMax(), u[t].position = y.getMin() - 1, u[t].transform -= 100 * u.length, u[t].item.style.transform = "translateX(" + u[t].transform + "%)"), a += c), o.style.transform = "translateX(" + a + "%)";
  },
      g = function g(e) {
    if (e.target.classList.contains("slider__control")) {
      e.preventDefault();
      var t = e.target.classList.contains("slider__control_right") ? "right" : "left";
      m(t);
    }
  };

  return i.forEach(function (e) {
    e.addEventListener("click", g);
  }), {
    right: function right() {
      m("right");
    },
    left: function left() {
      m("left");
    }
  };
},
    slider = multiItemSlider(".slider");

var leftPlayBtn = document.querySelector(".online");

function openZenflix() {
  window.open("https://www.netflix.com/ru/title/80189685", "_blank");
}

leftPlayBtn.addEventListener("click", openZenflix);
var bodyHTML = document.querySelector("body"),
    mainModalWindow = document.querySelector(".modal"),
    videoYoutubeWindow = document.querySelector(".modal-video"),
    playVideoBtn = document.querySelector(".b-play"),
    linkFromSlider = document.querySelectorAll(".slider__item a"),
    videoFrame = videoYoutubeWindow.children[0],
    closeVideoBtn = document.querySelector(".close-modal-btn"),
    videoArr = ["https://www.youtube.com/embed/ndl1W4ltcmg", "https://drive.google.com/file/d/1C813pAtth879vWaj96aU1l8UhaIqo3LC/preview", "https://drive.google.com/file/d/15O-AfuVJey_LkfATdraC8DaQ9LHgwvHk/preview", "https://drive.google.com/file/d/1eib2kcM62HtBdJ_JPF2TQXzUqXlnUKLO/preview", "https://drive.google.com/file/d/1VQd-gv_sp-w-Z4LvNJiCBRd6AeJrNfDs/preview", "https://drive.google.com/file/d/19VO4BF-W9wqL2LE2eOGaRUDY61kciODq/preview", "https://drive.google.com/file/d/1DuPM9F0W1B_iSkLGiEHSwtW4bjP4ii2W/preview", "https://drive.google.com/file/d/1KKd_2inexZbM34qY1N9VDY-KYkDSN3Oz/preview", "https://drive.google.com/file/d/1xBRUX9W4PJesYHShrRmjHYn88gM7aq4v/preview"];
playVideoBtn.addEventListener("click", function () {
  displayModalWindow(), addVideoLink(0);
});

for (var e = 0; e < linkFromSlider.length; e++) {
  linkFromSlider[e].addEventListener("click", function () {
    displayModalWindow(), displaySeries(event);
  });
}

function displayModalWindow() {
  bodyHTML.classList.add("no-scroll"), mainModalWindow.style.display = "block", videoYoutubeWindow.style.display = "block", closeVideoBtn.style.display = "block";
}

function displaySeries(e) {
  e.preventDefault();
  var t = e.target.classList[0][1];
  addVideoLink(t, t);
}

function addVideoLink(e) {
  videoFrame.setAttribute("src", videoArr[e]);
}

closeVideoBtn.addEventListener("click", function () {
  window.location.reload();
});